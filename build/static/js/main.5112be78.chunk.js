(this.webpackJsonptabletop_dice_app=this.webpackJsonptabletop_dice_app||[]).push([[0],{63:function(e,t,i){},64:function(e,t,i){},69:function(e,t,i){},70:function(e,t,i){"use strict";i.r(t);var l=i(0),n=i.n(l),a=i(8),s=i.n(a),c=(i(63),i(15)),r=i(16),o=i(24),u=i(23),d=(i(50),i(64),i(105)),h=i(103),v=i(106),b=i(6),f=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var l;return Object(c.a)(this,i),(l=t.call(this,e)).rollCallback=e.startscreen_roll_callback,l.state={number_of_dice:null},l}return Object(r.a)(i,[{key:"onRoll",value:function(){this.rollCallback(this.state.number_of_dice)}},{key:"onNumberChange",value:function(e){this.setState({number_of_dice:e.target.value})}},{key:"onKeyUp",value:function(e){"Enter"===e.key&&this.onRoll()}},{key:"render",value:function(){return Object(b.jsx)(d.a,{children:Object(b.jsx)(h.a,{variant:"outlined",label:"Dice",type:"number",value:this.state.number_of_dice,onChange:this.onNumberChange.bind(this),onKeyUp:this.onKeyUp.bind(this),InputProps:{endAdornment:Object(b.jsx)(v.a,{variant:"text",style:{marginLeft:5},onClick:this.onRoll.bind(this),children:"Roll!"})}})})}}]),i}(n.a.Component),j=i(51),m=function(){function e(){Object(c.a)(this,e),this.reset()}return Object(r.a)(e,[{key:"reset",value:function(){this.dice_values=[],this.addLevel(),this.explode={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},this.selected={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1}}},{key:"addValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dice_values[this.dice_values.length-1][e]+=t}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.dice_values[this.dice_values.length-1][e]=t}},{key:"addLevel",value:function(){this.dice_values.push({1:0,2:0,3:0,4:0,5:0,6:0})}},{key:"toggleSelected",value:function(e){this.selected[e]=!this.selected[e]}},{key:"isSelected",value:function(e){return this.selected[e]}},{key:"resetSelected",value:function(){this.selected={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1}}},{key:"getValueStr",value:function(e){var t="",i=!0;return this.dice_values.forEach((function(l){i||(t+="+"),t+=String(l[e]),i=!1})),this.explode[e]&&(t+=" *2"),t}},{key:"getSum",value:function(){var e=this;return[1,2,3,4,5,6].map((function(t){return e.getValueNum(t)})).reduce((function(e,t){return e+t}))}},{key:"getValueNum",value:function(e){var t=0;return this.dice_values.forEach((function(i){t+=i[e]})),this.explode[e]&&(t*=2),t}},{key:"setExplode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.explode[e]=t}},{key:"toggleExplode",value:function(e){this.explode[e]=!this.explode[e]}}]),e}(),_=(i(69),i(100)),k=i(101),p=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var l;return Object(c.a)(this,i),(l=t.call(this,e)).state={rolls:[],current_roll:0},l.state.rolls=l.initialRoll(e.dice_count),l.backHomeCallback=e.backHomeCallback,l}return Object(r.a)(i,[{key:"randInt",value:function(){return Math.floor(6*Math.random())+1}},{key:"initialRoll",value:function(e){for(var t=new m,i=0;i<e;i++)t.addValue(this.randInt());var l=[].concat(Object(j.a)(this.state.rolls),[t]);return this.setState({rolls:l}),l}},{key:"reroll",value:function(){for(var e=this.state.rolls[this.state.current_roll],t=0,i=1;i<=6;i++)e.isSelected(i)&&(t+=e.getValueNum(i),e.setValue(i));if(0!==t){e.addLevel();for(var l=0;l<t;l++)e.addValue(this.randInt());e.resetSelected(),this.setState({rolls:this.state.rolls})}}},{key:"toggleSelected",value:function(e,t){1===t.buttons&&(this.state.rolls[this.state.current_roll].toggleSelected(e),this.setState({rolls:this.state.rolls}))}},{key:"next",value:function(){if(this.state.current_roll===this.state.rolls.length-1){for(var e=this.state.rolls[this.state.current_roll],t=0,i=1;i<=6;i++)e.isSelected(i)&&(t+=e.getValueNum(i));if(0===t)return;this.initialRoll(t)}this.setState({current_roll:this.state.current_roll+1})}},{key:"priv",value:function(){0===this.state.current_roll?this.backHomeCallback():this.setState({current_roll:this.state.current_roll-1})}},{key:"explode",value:function(){for(var e=this.state.rolls[this.state.current_roll],t=1;t<=6;t++)e.isSelected(t)&&e.toggleExplode(t);e.resetSelected(),this.setState({rolls:this.state.rolls})}},{key:"getSelectedDiceCount",value:function(){var e=this.state.rolls[this.state.current_roll],t=0;if(void 0!==e)for(var i=1;i<=6;i++)e.isSelected(i)&&(t+=e.getValueNum(i));return t}},{key:"render",value:function(){var e=this,t=this.state.rolls[this.state.current_roll],i=0===this.state.current_roll,l=this.state.current_roll===this.state.rolls.length-1,n={text:i?"Home":"Prev"},a={disabled:!l},s={disabled:!l},c={text:l?"Roll!":"Next"},r=[6,5,4,3,2,1].map((function(i,n){var a=!1;i<6&&void 0!==t&&t.isSelected(i+1)!==t.isSelected(i)&&(a=!0);var s=!1;i>1&&void 0!==t&&t.isSelected(i-1)!==t.isSelected(i)&&(s=!0);var c=!1;return void 0!==t&&t.isSelected(i)&&(c=!0),{additional_class_name:[a?"diceTop diceTopMid":"",s?"diceBot diceBotMid":"",6===i?"diceTop":"",1===i?"diceBot":""],on_mouse_event:void 0!==t&&l?e.toggleSelected.bind(e,i):function(){},text:void 0!==t?t.getValueStr(i):"-",label:i,selected:c,color:c?"primary.main":"secondary.main",value:void 0!==t?t.getValueNum(i):0}})),o=[],u=0,h=0;return r.forEach((function(e,t){t>0&&r[t-1].selected!==e.selected&&(o.push({size:h,value:u,selected:r[t-1].selected}),h=0,u=0),u+=e.value,h+=1})),o.push({size:h,value:u,selected:r[5].selected}),Object(b.jsxs)(_.a,{children:["Roll #",this.state.current_roll+1,Object(b.jsx)("div",{className:"spacer"}),Object(b.jsxs)(k.a,{container:!0,direction:"row",children:[Object(b.jsx)(k.a,{item:!0,direction:"column",className:"diceCol1",children:r.map((function(e){return Object(b.jsxs)(d.a,{className:"diceLine "+e.additional_class_name.join(" "),color:e.color,onMouseDown:e.on_mouse_event,onMouseEnter:e.on_mouse_event,children:[Object(b.jsxs)("div",{className:"diceLabel",children:[e.label,":"]}),Object(b.jsx)("div",{className:"diceValue",children:e.text})]})}))}),Object(b.jsx)(k.a,{item:!0,direction:"column",className:"diceCol2",children:o.map((function(e){return Object(b.jsx)(k.a,{item:!0,className:"diceAnotation",style:{height:e.size/6*100+"%"},children:e.value})}))})]}),Object(b.jsx)("div",{className:"spacer"}),Object(b.jsx)(v.a,{variant:"contained",className:"diceButton",onClick:this.priv.bind(this),children:n.text}),Object(b.jsx)(v.a,{variant:"contained",className:"diceButton",onClick:this.reroll.bind(this),disabled:a.disabled,children:"Reroll"}),Object(b.jsx)(v.a,{variant:"contained",className:"diceButton",onClick:this.explode.bind(this),disabled:s.disabled,children:"Explode"}),Object(b.jsx)(v.a,{variant:"contained",className:"diceButton",onClick:this.next.bind(this),children:c.text})]})}}]),i}(n.a.Component),x=i(49),g=i(102),y=Object(x.a)({palette:{primary:{main:"#ff4400"},secondary:{main:"#0044ff"}}});var O=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var l;return Object(c.a)(this,i),(l=t.call(this,e)).state={show_start_screen:!0,height:window.innerHeight,width:window.innerWidth},window.addEventListener("resize",(function(){l.setState({height:window.innerHeight,width:window.innerWidth})})),l}return Object(r.a)(i,[{key:"startscreenRollCallback",value:function(e){this.setState({show_start_screen:!1,dice_count:e})}},{key:"backHomeCallback",value:function(){this.setState({show_start_screen:!0})}},{key:"render",value:function(){return Object(b.jsx)(g.a,{theme:y,children:Object(b.jsxs)(k.a,{container:!0,className:"App",justify:"center",alignItems:"center",style:{height:this.state.height,width:this.state.width},children:[this.state.show_start_screen&&Object(b.jsx)(f,{startscreen_roll_callback:this.startscreenRollCallback.bind(this)}),!this.state.show_start_screen&&Object(b.jsx)(p,{dice_count:this.state.dice_count,backHomeCallback:this.backHomeCallback.bind(this)})]})})}}]),i}(n.a.Component);s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.5112be78.chunk.js.map